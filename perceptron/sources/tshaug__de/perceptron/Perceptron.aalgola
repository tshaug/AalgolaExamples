namespace //tshaug.de/perceptron/

	Â¶import ///java/lang/System
Â¶import java:///java/lang/String as JavaString

import //tshaug.de/perceptron/math/FeatureVector4D
import //tshaug.de/perceptron/algorithm/PerceptronAlgo
import //tshaug.de/perceptron/util/IrisDataGenerator


âŸ¦programâŸ§
object Perceptron âŒ
	This is a simple program to demonstrate the Perceptron implementation in ôŠ¨–lgola
	Since ôŠ¨–lgola is still in development some parts of the code is not structured as I would like it, 
	eg hardcorded test data, using ğ”½â‚†â‚„ instead of â„•â‚ƒâ‚‚ is some places 
â is

	âŸ¦overrideâŸ§
	method run() â†’ () âŒ
		Hey ho, let's go
	 â is
		 epochs :â† 10
		 runPerceptron(0.1, epochs) 
		 debugWriteLine("AI mit ôŠ¨–lgola abgeschlossen 2")
		 
		Â¶Console.WriteLine("test mit der Java Console")
		 
	end method
	
	method runPerceptron(learningRate : ğ”½â‚†â‚„, epochs : â„•â‚ƒâ‚‚) â†’ () is
		
		dataGenerator :â† IrisDataGenerator()
		Â¶ prepare training data
		training_inputs :â† dataGenerator.irisTrainingData()	
		labels :â† dataGenerator.irisTrainingLabels()
		
		debugWriteLine("Start Trainingâ€¦")
		perceptron :â† PerceptronAlgo(0.1)
		weights :â† FeatureVector4D(0.0, 0.0, 0.0, 0.0)
		debugWriteLine("Start training!")
		Â¶ at the mopment it is not possible to get the element count in a way so that we can use itâ€¦
		perceptron.train(training_inputs, labels, 80, 4)
		
		debugWriteLine("Training finished!")
		
		
		
		test1 : ğ”½â‚†â‚„ â† perceptron.predict(FeatureVector4D(5.1, 3.5, 1.4, 0.2))
		debugWrite("Iris setosa Test  (expected 0.0): ")
		debugWriteLine(test1)
		
		Â¶ Test: Iris versicolor
		test2 :â† perceptron.predict(FeatureVector4D(5.5, 2.3, 4.0, 1.3))
		debugWrite("Iris versicolor Test  (expected 1.0): ")
		debugWriteLine(test2)
		
		
		testInputs :â† dataGenerator.irisTestData()
		testLabels :â† dataGenerator.irisTestLabels()
		
		
		
		for i âˆˆ âŸ¨1, â€¦, 20âŸ© do
			testInput : FeatureVector4D â† testInputs[i]
			testLabel :â† testLabels[i]
			
			debugWriteLine(perceptron.predict(testInput))	
		end
end
		
		
		
		
function arrayOf(xâ‚ : ğ”½â‚†â‚„, xâ‚‚ : ğ”½â‚†â‚„, xâ‚ƒ : ğ”½â‚†â‚„, xâ‚„ : ğ”½â‚†â‚„, dummy : ğ”½â‚†â‚„) â†’ MemorySegmentâŸ¦ğ”½â‚†â‚„âŸ§ is
		m :â† MemorySegmentâŸ¦ğ”½â‚†â‚„âŸ§(5, 0.0)
		m[0] â† xâ‚
		m[1] â† xâ‚‚
		m[2] â† xâ‚ƒ
		m[3] â† xâ‚„
		m[4] â† dummy								 
		return m
	end
		
end object